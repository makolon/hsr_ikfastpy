# HSRIKFastPy
This is a Python wrapper over OpenRave's generated IKFast C++ executables for the Toyota Human Suppport Robot (HSR).

Note: This repository is influenced from the Andy Zeng IKFastPy repository.

## Files
- **wrapper.xml** - A custom OpenRave XML file describing the kinematics of the HSR. Modify this if you change the arm or tool center point position.
- **ikfast.cpp** - C++ code at the heart of IKFast, generated by OpenRave using `wrapper.xml`. No need to modify this.
- **ikfast.h** - C++ header file necessary for compiling `ikfast.cpp`. No need to modify this.
- **ikfast.py** - Python interface for inverse kinematics solver implemented in iffast.cpp.
- **setup.py**
- **demo.py**


## Installation


## Quick Start
### Create IK Python Interface
1. Clone this repository
```
git clone https://github.com/makolon/hsr_ikfast.git
```
2. Build docker
```
cd docker
./build.sh
```
3. Run docker
```
./run.sh
```
4. Execute OpenRave
```
cd ../
./exec_openrave.sh
```
5. Compile the Cython wrapper
```
cd ./hsrb_ikfast
python setup.py
```

### Simulation Demo
Run demo in pybullet simulation environment
```
cd ./examples/simulation
python test_hsr.py 
```

### Real Demo
RUn demo in Real HSR
```
cd ./examples/real
python ik_controller.py
```

## Modifying Robot Kinematics with OpenRave
1. (Optional) Debug the kinematics using OpenRave's viewer
```
openrave wrapper.xml
```

2. (Optional) Check the links in your file
```
openrave-robot.py hsrb4s.dae --info links
```
3. Use OpenRave to re-generate the IKFast C++ code `ikfast61.cpp`
```
./exec_openrave.sh
```
You can choose `--iktype` in `exec_openrave.sh` from the list of ik types described in this [document](http://openrave.org/docs/latest_stable/openravepy/ikfast/#ik-types).

## Citation
